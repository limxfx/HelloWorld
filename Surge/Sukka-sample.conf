# updated at: 2024-12-1
# å‚è€ƒé…ç½® - https://blog.skk.moe/post/i-have-my-unique-surge-setup/
# å®˜æ–¹æ‰‹å†Œ - https://manual.nssurge.com/
# ç†è§£åŸç† - https://manual.nssurge.com/book/understanding-surge/cn/
# å¸®åŠ©ä¸­å¿ƒ - https://nssurge.zendesk.com/
# æŠ€æœ¯ç¤¾åŒº - https://community.nssurge.com

[General]
# åœ¨ Surge iOS ä¸­ï¼ŒåŒ…å«åœ¨ skip-proxy çš„ IP æ®µå’ŒåŸŸåä¼šç»•è¿‡ Surge Proxyã€ç›´æ¥é€šè¿‡ Surge VIF è™šæ‹Ÿç½‘å¡å¤„ç†ï¼›è€Œåœ¨ Surge Mac ä¸­ï¼Œskip-proxy ä¼šè¢«å†™å…¥ç³»ç»Ÿåå¥½è®¾ç½®ä¸­çš„ Skip Proxyã€‚è¿™ä¸ªè®¾ç½®ä¸»è¦æ˜¯ä¸ºäº†é¿å…æŸäº› iOS åº”ç”¨æ£€æµ‹åˆ°ç³»ç»Ÿä»£ç†ï¼Œä»¥åŠä¸€äº›ä¼šè¯»ç¯å¢ƒå˜é‡çš„è½¯ä»¶ï¼ˆä¾‹å¦‚ curlã€Node.js å’Œ Bun çš„ HttpAgentï¼‰èƒ½å¤Ÿæ­£ç¡®å¤„ç†å†…ç½‘æµé‡ã€‚
skip-proxy = 127.0.0.0/8, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 162.14.0.0/16, 211.99.96.0/19, 162.159.192.0/24, 162.159.193.0/24, 162.159.195.0/24, fc00::/7, fe80::/10, localhost, *.local, captive.apple.com, passenger.t3go.cn, *.ccb.com, wxh.wo.cn, *.abcchina.com, *.abcchina.com.cn

# åœ¨ always-real-ip å†…ç½®çš„åŸŸåï¼ŒSurge çš„ DNS åœ¨è§£ææ—¶ä¸ä¼šè¿”å› Fake IPã€ä¸»è¦æ”¹å–„éƒ¨åˆ† UDP æµé‡å’Œéƒ¨åˆ†è½¯ä»¶çš„å…¼å®¹æ€§ã€‚æˆ‘ä½¿ç”¨è„šæœ¬è‡ªåŠ¨åŒ–ç”Ÿæˆçš„ Surge Module å»è®¾ç½®è¿™ä¸ªå€¼ã€‚
# å»ºè®®ä½¿ç”¨ skk çš„ sgmodel æ¥å®ç°ã€‚https://ruleset.skk.moe/Modules/sukka_common_always_realip.sgmodule
#always-real-ip = <simple-hostname>, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com, easy-login.10099.com.cn,*-update.xoyocdn.com, *.prod.cloud.netflix.com, appboot.netflix.com, *-appboot.netflix.com

# æ§åˆ¶ä¸å¸¦ç‚¹çš„åŸŸåï¼ˆå¦‚ localhostã€DEVICE-A114514 è¿™ç±» mDNS åï¼‰æ˜¯å¦ç»•è¿‡ Surge Proxyã€ç›´æ¥ä½¿ç”¨ Surge VIF è™šæ‹Ÿç½‘å¡å¤„ç†ã€‚
exclude-simple-hostnames = true

# è®© Surge åŠ«æŒç›®æ ‡ä¸º 8.8.8.8 å’Œ 8.8.4.4 çš„ 53 ç«¯å£ï¼Œè§£å†³ Google ç³»å®¶ç”¨äº§å“ï¼ˆå¦‚ Chromecastï¼‰å¼ºåˆ¶ä½¿ç”¨ 8.8.8.8 å’Œ 8.8.4.4ã€ä¸ä½¿ç”¨ Surge DNS çš„é—®é¢˜ã€‚
hijack-dns = 8.8.8.8:53, 8.8.4.4:53

# ipv6 é€‰é¡¹ä¸»è¦æ§åˆ¶ Surge çš„ DNSï¼Œtrue æ—¶ Surge çš„ DNS ä¼šåŒæ—¶è¯·æ±‚ AAAA å’Œ A è®°å½•ã€false æ—¶ Surge åªä¼šè¯·æ±‚ A è®°å½•ã€‚
ipv6 = false
# ä¸€èˆ¬çš„ï¼Œå»ºè®®å°†ä¸¤ä¸ª IPv6 éƒ½ç¦ç”¨ï¼Œå› ä¸ºåœ¨å›½å†…ä½¿ç”¨ IPv6 å¯èƒ½å¯¼è‡´ç½‘ç»œä½“éªŒåŠ£åŒ–ï¼Œè€Œä¸”å³ä½¿åœ¨ Surge ä¸­ç¦ç”¨äº† IPv6ã€ä¹Ÿä¸å½±å“æµ·å¤–ç½‘ç«™å’Œæµåª’ä½“çš„ IPv6ã€‚
# ipv6-vif é€‰é¡¹ä¸»è¦æ§åˆ¶ Surge Helper ä¿®æ”¹è·¯ç”±è¡¨çš„è¡Œä¸ºã€æ˜¯å¦å°† IPv6 çš„ç½‘æ®µä¹Ÿæ·»åŠ åˆ°æœ¬æœºè·¯ç”±è¡¨é€šè¿‡ Surge è™šæ‹Ÿç½‘å¡ã€‚
ipv6-vif = off

# å½“ä¸€ä¸ªè¯·æ±‚è¢« Surge çš„ REJCT-* ç­–ç•¥æ‹¦æˆªæ—¶ï¼Œè¿”å›ä¸€ä¸ª HTML æ‹¦æˆªé¡µã€‚
show-error-page-for-reject = true

# æ§åˆ¶æ˜¯å¦è®© Surge for Mac è¯»å– /etc/hosts æ–‡ä»¶å¹¶åœ¨ Surge DNS ä¸­æ¨¡æ‹Ÿè¯¥è¡Œä¸ºã€‚
read-etc-hosts = true

# Surge ä¼šä½¿ç”¨ HEAD æ–¹å¼è¯·æ±‚ internet-test-url å’Œ proxy-test-url çš„åœ°å€ï¼Œå¹¶ä¸”æ— è§†å“åº”çš„çŠ¶æ€ç ã€åªè¦æœ‰å“åº”å°±è§†ä¸ºç½‘ç»œå¯è¾¾ã€‚Surge ä¼šé€šè¿‡è¿œç«¯ç­–ç•¥ã€å¯¹ proxy-test-url ä¸­æŒ‡å®šçš„ DNS æœåŠ¡å™¨å’ŒåŸŸåè¿›è¡Œä¸€æ¬¡ DNS è§£æè¯·æ±‚ï¼Œå¦‚æœè¿œç«¯ DNS è§£ææˆåŠŸåˆ™è§†ä¸ºè¿œç«¯ç­–ç•¥ UDP å¯è¾¾ã€‚
internet-test-url = http://www.apple.com/library/test/success.html
proxy-test-url = http://latency-test.skk.moe/endpoint
# è¿™ä¸‰ä¸ªé€‰é¡¹æ§åˆ¶ Surge å¦‚ä½•æµ‹è¯•æœ¬åœ°å’Œè¿œç«¯ç­–ç•¥çš„å¯ç”¨æ€§ã€ä»¥åŠè¿œç«¯ç­–ç•¥çš„ UDP å¯è¾¾æ€§ã€‚
# proxy-test-udp å»ºè®®ä½¿ç”¨éå¸¸è§çš„æµ·å¤–å…¬å…± DNSï¼ˆå¦‚ Vercaraã€åŸ UltraDNS / NeuStar çš„å…¬å…± DNSï¼‰è§£æå¸¸è§åŸŸåï¼ˆå¦‚ www.apple.comï¼‰ã€‚
proxy-test-udp = www.apple.com@64.6.64.6

# æ§åˆ¶ Surge for Mac çš„ VIF è™šæ‹Ÿç½‘å¡ä½¿ç”¨çš„åº•å±‚æœºåˆ¶ã€‚è¯¦æƒ…å¯ä»¥æŸ¥çœ‹ https://manual.nssurge.com/others/misc-options.html#vif-mode å’Œ https://community.nssurge.com/d/1915-surge-mac-5-vif-m3
vif-mode = v3

# å½“å‰æµé‡é€‰ç”¨çš„ç­–ç•¥ä¸æ”¯æŒ UDP è½¬å‘æ—¶ã€å¦‚ä½•å¤„ç†è¿™éƒ¨åˆ†æµé‡ï¼Œå¯ä»¥è®¾ç½® DIRECT å’Œ REJECTã€‚æ¨èç”¨ REJECTï¼Œé˜²æ­¢ UDP æµé‡è¢«ç›´è¿æ¼å‡ºå»ã€‚
udp-policy-not-supported-behaviour = REJECT

#> DNS æœåŠ¡å™¨
dns-server = 223.5.5.5, 119.29.29.29
#> é™¤éå½“åœ° ISP æœ‰ä¸¥é‡çš„ DNS æ±¡æŸ“é—®é¢˜ï¼Œå¦åˆ™æ²¡å¿…è¦å¼€å¯ DoHï¼Œä¼ ç»Ÿ DNS çš„æ€§èƒ½æœ€ä¼˜ï¼Œç½‘ç»œå¼‚å¸¸åæ¢å¤é€Ÿåº¦æœ€å¿«ã€‚å¦‚æœç½‘ç»œç¯å¢ƒå¹¶ä¸æ˜¯å¾ˆæ–‡æ˜ã€åˆ™ä½¿ç”¨å›½å†…å…¬å…± DNS æä¾›çš„åŠ å¯† DNS æœåŠ¡ã€ç‰ºç‰²å›½å†… CDN ä½“éªŒæ¢å–æ•´ä½“çš„ç½‘ç»œä½“éªŒã€‚
#encrypted-dns-server = quic://223.5.5.5, quic://223.6.6.6, https://1.12.12.12/dns-query, https://120.53.53.53/dns-query
#> æ—¥å¿—çº§åˆ«
loglevel = notify
#> æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 2
#> å¯ç”¨ Wi-Fi åŠ©æ‰‹ (åœ¨ Wi-Fi ç½‘ç»œä¸ä½³æ—¶å°è¯•ä½¿ç”¨æ•°æ®ç½‘ç»œå»ºç«‹è¿æ¥ï¼Œè¯·ä»…å½“ä½¿ç”¨ä¸é™é‡çš„æ•°æ®æµé‡æ—¶å¼€å¯)
wifi-assist = true
#> GeoIPæ•°æ®åº“
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb

[Proxy Group]
#> ç­–ç•¥ç»„ï¼ˆä¸‹é¢çš„èŠ‚ç‚¹ä¿¡æ¯éœ€ä¸å¤–éƒ¨èŠ‚ç‚¹å¯¹åº”ï¼Œè‹¥åˆ é™¤äº†å¤–éƒ¨èŠ‚ç‚¹é‡Œçš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨ç­–ç•¥ç»„é‡Œä¹Ÿè¦åˆ é™¤ã€‚ï¼‰
Proxy = select, DIRECT, ğŸ‡­ğŸ‡° HK, ğŸ‡ºğŸ‡¸ US, ğŸ‡¯ğŸ‡µ JP, ğŸ‡¨ğŸ‡³ TW, ğŸ‡°ğŸ‡· KR, ğŸ‡¸ğŸ‡¬ SG, ğŸŒ Other, âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Proxy.png

CDN = select, DIRECT, ğŸ‡­ğŸ‡° HK, ğŸ‡ºğŸ‡¸ US, ğŸ‡¯ğŸ‡µ JP, ğŸ‡¨ğŸ‡³ TW, ğŸ‡°ğŸ‡· KR, ğŸ‡¸ğŸ‡¬ SG, ğŸï¸ Streaming, icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Download.png
Streaming!CN = select, DIRECT, ğŸ‡­ğŸ‡° HK, ğŸ‡ºğŸ‡¸ US, ğŸ‡¯ğŸ‡µ JP, ğŸ‡¨ğŸ‡³ TW, ğŸ‡°ğŸ‡· KR, ğŸ‡¸ğŸ‡¬ SG, ğŸï¸ Streaming, icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Streaming!CN.png
#StreamingCN=select, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/StreamingCN.png
AI = select, ğŸ‡ºğŸ‡¸ US, ğŸ  HomeNetwork, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/OpenAI.png
Google  = select, ğŸ‡­ğŸ‡° HK, ğŸ‡ºğŸ‡¸ US, ğŸ  HomeNetwork, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Google.png
Telegram = select, ğŸ‡­ğŸ‡° HK, ğŸ‡ºğŸ‡¸ US, ğŸ‡¯ğŸ‡µ JP, ğŸ‡¨ğŸ‡³ TW, ğŸ‡°ğŸ‡· KR, ğŸ‡¸ğŸ‡¬ SG, ğŸ  HomeNetwork, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/lige47/telegram(1).png
Apple = select, DIRECT, ğŸ‡­ğŸ‡° HK, ğŸ‡ºğŸ‡¸ US, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Apple.png
Microsoft = select, DIRECT, ğŸ‡­ğŸ‡° HK, ğŸ‡ºğŸ‡¸ US, icon-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Microsoft.png

#> å›½å®¶èŠ‚ç‚¹
ğŸ‡­ğŸ‡° HK = smart, include-other-group=âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, policy-regex-filter=(ğŸ‡­ğŸ‡°)|(é¦™æ¸¯)|(Hong)|(HK), icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
ğŸ‡ºğŸ‡¸ US = smart, include-other-group=âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, policy-regex-filter=(ğŸ‡ºğŸ‡¸)|(ç¾å›½)|(States)|(US), icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png
ğŸ‡¯ğŸ‡µ JP = smart, include-other-group=âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(æ—¥æœ¬)|(Japan)|(JP), icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png
ğŸ‡¨ğŸ‡³ TW = smart, include-other-group=âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, policy-regex-filter=(ğŸ‡¨ğŸ‡³)|(å°æ¹¾)|(Tai)|(TW), icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Taiwan.png
ğŸ‡°ğŸ‡· KR = smart, include-other-group=âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, policy-regex-filter=(ğŸ‡°ğŸ‡·)|(éŸ©å›½)|(Korea)|(KR), icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Korea.png
ğŸ‡¸ğŸ‡¬ SG = smart, include-other-group=âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, policy-regex-filter=(ğŸ‡¸ğŸ‡¬)|(æ–°åŠ å¡)|(Singapore)|(SG), icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
ğŸŒ Other = select, include-other-group=âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, policy-regex-filter=^(?!.*((Traffic)|(Expire)|ğŸ‡­ğŸ‡°|ğŸ‡¨ğŸ‡³|ğŸ‡ºğŸ‡¸|ğŸ‡¯ğŸ‡µ|ğŸ‡¸ğŸ‡¬)).*$,icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png

#> ç‰¹æ®ŠèŠ‚ç‚¹
ğŸï¸ Streaming = select, include-other-group=âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, update-interval=0, no-alert=0, hidden=0,include-all-proxies=0, policy-regex-filter=(0\.[1-9])|(æ—¥ç”¨)|(ä½å€)|(å®éªŒ), icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Download.png
ğŸ  HomeNetwork = select, include-other-group=âœˆï¸ æˆ‘çš„èŠ‚ç‚¹, update-interval=0, no-alert=0, hidden=0,include-all-proxies=0, policy-regex-filter=(å®¶ç”¨)|(å®¶åº­)|(å®¶å®½), icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TAG.png

#> å¤–éƒ¨èŠ‚ç‚¹
âœˆï¸ æˆ‘çš„èŠ‚ç‚¹ = select, policy-path=æœºåœºè®¢é˜…é“¾æ¥, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, persistent=1, icon-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Airport.png

[Rule]
# é¿å… DNS æ±¡æŸ“å’Œ DNS æ³„æ¼æœ€æœ‰æ•ˆçš„åŠæ³•å°±æ˜¯æ°¸è¿œä¸åœ¨æœ¬åœ°è¿›è¡Œ DNS è§£æï¼Œè€Œ Surge å’Œ Clash èƒ½ä¸”åªèƒ½é€šè¿‡ Fake IP å’ŒåŸŸåè§„åˆ™åŒ¹é…çš„æ–¹å¼ å¯ä»¥å®ç°éç›´è¿åŸŸå ä¸€å®šä¸åœ¨æœ¬åœ°æœ¬æœºè¿›è¡Œä»»ä½• DNS è§£æã€‚
# åœ¨ Surge å’Œ Clash ä¸­ï¼Œè§„åˆ™è‡ªä¸Šè€Œä¸‹åŒ¹é…ï¼Œåªæœ‰å½“é‡åˆ° IP ç±»è§„åˆ™ï¼ˆå¦‚ IP-CIDRã€IP-CIDR6ã€GEOIP å’Œ IP-ASNï¼‰æ—¶æ‰ä¼šå‘èµ· DNS è§£æã€‚å› æ­¤ï¼Œåœ¨ Surge ä¸­ï¼Œå°†ä¼šè§¦å‘ DNS è§£æçš„è§„åˆ™æ”¾åœ¨åŸŸåå’Œ URL åŒ¹é…è§„åˆ™åé¢éå¸¸é‡è¦ã€‚
# åœ¨ Surge Profile ä¸­å…ˆå¼•ç”¨æ‰€æœ‰çš„é IP ç±»è§„åˆ™å†å¼•ç”¨ IP ç±»è§„åˆ™ï¼Œå¯ä»¥é¿å… DNS æ³„æ¼å’Œ DNS æ±¡æŸ“ã€‚

### no-ip ###
#> å¹¿å‘Šæ‹¦æˆª / éšç§ä¿æŠ¤ / ç—…æ¯’æ‹¦æˆª / é’“é±¼å’Œè¯ˆéª—åŸŸåæ‹¦æˆª
# åº”è¯¥æ˜¯ç›®å‰å¸‚é¢ä¸Šæ‹¦æˆªæœ€å…¨é¢ã€å‡ ä¹é›¶è¯¯æ€çš„ Surge / Clash åŸŸåé›†ï¼ŒåŸŸåæ•°æ®æ¥æºä¸º uBlock Originã€AdGuardã€EasyList ç­‰å…± 38 ä¸ªæ¥æºï¼Œæˆªè‡³æœ¬æ–‡å†™å°±ï¼Œæ¡ç›®æ•°é‡å·²ç»è¾¾åˆ° 30 ä¸‡çº§åˆ«ã€‚
# éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSurge / Clash å®Œå…¨æ— æ³•æ›¿ä»£æµè§ˆå™¨å†…çš„å»å¹¿å‘Šæ’ä»¶ï¼ˆå¦‚ AdBlock Plusï¼‰å’Œè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¸Šçš„å»å¹¿å‘Šè½¯ä»¶ï¼ˆå¦‚ AdGuardï¼‰ã€‚
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT-TINYGIF,pre-matching,extended-matching
#DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject_extra.conf,REJECT-TINYGIF,pre-matching,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject.conf,REJECT,pre-matching,extended-matching
#> å…¶å®ƒåŸŸåæ‹¦æˆª
# å…¶å®ƒæ‹¦æˆªè§„åˆ™ä¸æ¶‰åŠå¹¿å‘Šã€ç—…æ¯’ã€é’“é±¼ç­‰çš„æ‹¦æˆªï¼Œä¸»è¦æ˜¯é€šè¿‡å±è”½ç‰¹å®šç±»å‹çš„ç½‘ç»œè¿æ¥æ”¹å–„æ—¥å¸¸ä¸Šç½‘ä½“éªŒã€‚
# ç¬¬ä¸€ä¸ªè§„åˆ™ç»„ä¼šé˜»æ­¢ YouTubeã€Bilibili å’Œæ–—é±¼çš„è§†é¢‘ CDN çš„ QUICï¼Œä»¥åŠé˜»æ­¢æ–—é±¼å°†ç”¨æˆ·çš„æ‰‹æœºç”µè„‘å˜æˆ PCDNã€‚
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-no-drop.conf,REJECT-NO-DROP,pre-matching,extended-matching
# ç¬¬äºŒä¸ªè§„åˆ™ç»„æ˜¯ç›´æ¥ä¸¢å¼ƒå‘å¾€ Adobe ç³»åˆ—è½¯ä»¶å†…éƒ¨çš„è·Ÿè¸ªæ‰“ç‚¹åŸŸåçš„æ•°æ®åŒ… â€”â€” Adobe è½¯ä»¶çš„æ‰“ç‚¹ SDK æ‰€ä½¿ç”¨çš„ HTTP è¯·æ±‚åº“å®ç°ä¸å½“ã€ä¼šæ— é™é‡è¯•è¯·æ±‚ï¼Œå¯¼è‡´ Surge / Clash å†…å­˜æ³„æ¼ã€‚
#RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-drop.conf,REJECT-DROP,pre-matching,extended-matching
#> URL-REGEX
# éœ€æ­é… Surge æ¨¡å— https://ruleset.skk.moe/Modules/sukka_mitm_hostnames.sgmodule ä½¿ç”¨
# MITM å’Œ URL-REGEX æ€§èƒ½å¼€é”€æå¤§ï¼Œä¸æ¨èä½¿ç”¨
#RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-url-regex.conf,REJECT,pre-matching,extended-matching

#> æµ‹é€Ÿç½‘ç«™åŠå…¶æµ‹é€Ÿç‚¹åŸŸå
#DOMAIN-SET,https://ruleset.skk.moe/List/domainset/speedtest.conf,Proxy,extended-matching

#> é™æ€ CDN åŸŸå
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/cdn.conf,CDN,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/cdn.conf,CDN,extended-matching

#> æµåª’ä½“åŸŸå
# å…¶ä¸­ï¼Œstream_[xx].conf åŒ…å« é™å®šåœ°åŒºè®¿é—®çš„æµåª’ä½“ï¼ˆä¾‹å¦‚ BBC ç›´æ’­åªå…è®¸åœ¨è‹±å›½è®¿é—®ï¼‰çš„è§„åˆ™ï¼Œè€Œ stream.conf åˆ™åŒ…å«æ‰€æœ‰æµåª’ä½“çš„å…¨éƒ¨è§„åˆ™ã€‚ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©æ€§å¼•ç”¨ stream_[xx].conf è§„åˆ™åˆ’åˆ†ç‹¬ç«‹ç­–ç•¥ã€å¹¶ä½¿ç”¨ stream.conf ä¸ºå‰©ä¸‹æ‰€æœ‰çš„å¸¸ç”¨æµåª’ä½“åšå…œåº•ã€‚
#RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_hk.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å],extended-matching
#RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_jp.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å],extended-matching
#RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_us.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å],extended-matching
#RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_tw.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å],extended-matching
#RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_kr.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å],extended-matching
#RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_eu.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å],extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream.conf,Streaming!CN,extended-matching

#> AIGC ç±»æœåŠ¡åŸŸå
# å¤§éƒ¨åˆ†å†…å®¹ç”Ÿæˆå¼ AI æœåŠ¡ï¼ˆå¦‚ OpenAI åŠ ChatGPTã€Google Gemini ç­‰ï¼‰éƒ½ä¼šé™åˆ¶ç‰¹å®šå›½å®¶å’Œåœ°åŒºçš„è®¿é—®ã€‚ç”±äºè¿™éƒ¨åˆ†æœåŠ¡çš„å…¬å¸ä¸€èˆ¬ä½äºç¾å›½ã€ç¾å›½å¯¹äº AI çš„ç«‹æ³•ä¹Ÿè¾ƒä¸ºå®½æ¾ï¼Œæˆ‘å»ºè®®è¿™ä¸ªè§„åˆ™ç»„åœ¨åˆ†é…ç­–ç•¥æ—¶ã€ä¼˜å…ˆé€‰ç”¨ä½äºç¾å›½çš„ç­–ç•¥ç»„è®¿é—®ã€‚
RULE-SET,https://ruleset.skk.moe/List/non_ip/ai.conf,AI,extended-matching

#> Telegram åŸŸå
# åŒ…å« Telegram åŠå…¶æ——ä¸‹å…¶ä»–æœåŠ¡ï¼ˆTelegraphï¼‰çš„åŸŸåã€‚
RULE-SET,https://ruleset.skk.moe/List/non_ip/telegram.conf,Telegram,extended-matching

#> è‹¹æœå’Œå¾®è½¯æœåŠ¡åŸŸå
# Apple & Microsoft å›½å†… CDN åŸŸå
#RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cdn.conf,DIRECT
#RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft_cdn.conf,DIRECT
#> Apple CN åŸŸåï¼Œäº‘ä¸Šè´µå·ï¼ˆicloud.com.cnï¼‰å’Œè‹¹æœåœ°å›¾å›½å†…ç‰ˆç­‰æœåŠ¡çš„åŸŸåï¼Œè¿™éƒ¨åˆ†åŸŸåéœ€è¦å›½å†…ç›´è¿è®¿é—®ã€‚
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cn.conf,DIRECT
#> æ’é™¤äº†æœ‰å›½å†… CDN èŠ‚ç‚¹çš„åŸŸåå’Œå›½åŒºä¸“ç”¨åŸŸåä»¥åï¼Œè‹¹æœå’Œå¾®è½¯å…¶ä½™çš„åŸŸåã€‚
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_services.conf,Apple,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft.conf,Microsoft,extended-matching
#>> iCloud Private Relay åŸŸååˆ—è¡¨
# æœ¬æ¡é…ç½®è¯·é˜…è¯»å†…å®¹åè‡ªè¡Œåˆ¤æ–­æ˜¯å¦å¯ç”¨
#DOMAIN-SET,https://ruleset.skk.moe/List/domainset/icloud_private_relay.conf,Apple,extended-matching

#>> è‡ªå®šä¹‰ non-ip è§„åˆ™
# Google
RULE-SET,https://raw.githubusercontent.com/limxfx/HelloWorld/refs/heads/main/Surge/Ruleset/non_ip/google.list,Google,extended-matching

#> ç½‘æ˜“äº‘éŸ³ä¹çš„åŸŸå
# ç½‘æ˜“äº‘éŸ³ä¹çš„ API åŸŸåå’Œç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯çš„è¿›ç¨‹åã€‚è¿™ä¸ªè§„åˆ™ä¸»è¦ç”¨äºä¸ä¾µå…¥å¼ä¿®æ”¹ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯ã€å°†æŸäº›ç½‘æ˜“äº‘éŸ³ä¹ä½¿ç”¨ç‰¹æ®Šç­–ç•¥ä»¥å®ç°æŸäº›ç‰¹æ®Šéœ€æ±‚ã€‚
#RULE-SET,https://ruleset.skk.moe/List/non_ip/neteasemusic.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å],extended-matching

#> è½¯ä»¶ã€æ¸¸æˆå’Œé©±åŠ¨çš„ä¸‹è½½å’Œæ›´æ–°åŸŸå
# æ”¶é›†äº†æ“ä½œç³»ç»Ÿã€è½¯ä»¶ã€é©±åŠ¨ã€æ¸¸æˆï¼ˆä¾‹å¦‚ Steam å’Œ Epicï¼‰çš„ä¸‹è½½å’Œæ›´æ–°åŸŸåï¼Œä½†ä¸åŒ…å«å›½å†…æœ‰ CDN èŠ‚ç‚¹çš„åŸŸåï¼ˆé‚£éƒ¨åˆ†åŸŸåå·²ç»åŒ…æ‹¬åœ¨å‰æ–‡ apple_cdn.conf å’Œ microsoft_cdn.confï¼‰ï¼Œä½œç”¨å’Œé™æ€ CDN è§„åˆ™é›†ç±»ä¼¼ã€‚
# è€ƒè™‘åˆ°å¤§éƒ¨åˆ†æ“ä½œç³»ç»Ÿã€è½¯ä»¶ã€é©±åŠ¨ã€æ¸¸æˆçš„ä¸‹è½½åŸŸååœ¨å›½å†…å¯è¾¾ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªèº«éœ€è¦ã€é…Œæƒ…è®¾ç½® download.conf èµ°ç›´è¿ï¼Œæˆ–è€…åœ¨ä¸‹è½½å¼€å§‹å‰æ‰‹åŠ¨è°ƒæ•´ç­–ç•¥ã€‚
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/download.conf,DIRECT,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/download.conf,DIRECT,extended-matching

#> å¸¸è§æµ·å¤–åŸŸå
# å¸¸è§æµ·å¤–æœåŠ¡å’Œäº’è”ç½‘å…¬å¸çš„åŸŸåã€‚å…¶ä¸­éƒ¨åˆ†åŸŸåè¢« DNS æ±¡æŸ“ï¼Œå°†å…¶æ”¶å½•åœ¨åŸŸåç±»è§„åˆ™ä¸­ã€é…åˆè¿œç«¯ç­–ç•¥å¯ä»¥é¿å… Surge åœ¨æœ¬æœºè§£æè¿™äº›åŸŸåã€æœ‰æ•ˆé¿å… DNS æ±¡æŸ“å’Œ DNS æ³„æ¼ã€‚
RULE-SET,https://ruleset.skk.moe/List/non_ip/global.conf,Proxy,extended-matching

#> å›½å†…å¸¸è§åŸŸå
# äººå·¥ç»´æŠ¤çš„å›½å†…å¸¸è§äº’è”ç½‘å…¬å¸å’ŒæœåŠ¡çš„åŸŸåã€‚è¿™éƒ¨åˆ†åŸŸåä¸€èˆ¬éœ€è¦é€šè¿‡å›½å†…ç›´è¿è®¿é—®ã€‚
RULE-SET,https://ruleset.skk.moe/List/non_ip/domestic.conf,DIRECT,extended-matching
#>> å¸¸è§ç›´è¿è§„åˆ™åˆ—è¡¨ 
# éœ€è¦èµ°ç›´è¿çš„è¿›ç¨‹å’ŒåŸŸåï¼ŒåŒ…å«å¤§éƒ¨åˆ† BT å’Œ BT Based ä¸‹è½½å™¨çš„è¿›ç¨‹åã€PT ç«™çš„åŸŸåã€AdGuard ç¨‹åºå¾€ç½‘é¡µä¸­æ³¨å…¥å»å¹¿å‘Šå¢å¼ºè„šæœ¬çš„åŸŸåï¼ˆå¦‚ local.adguard.org å’Œ injections.adguard.orgï¼‰ç­‰ã€‚
# æœ¬æ¡é…ç½®é˜…è¯»è¯´æ˜åè‡ªè¡Œé€‰æ‹©æ˜¯å¦å¯ç”¨
#RULE-SET,https://ruleset.skk.moe/List/non_ip/direct.conf,DIRECT,extended-matching

#> å†…ç½‘åŸŸå
# åŒ…å« .local å’Œå±€åŸŸç½‘ IP çš„ in-addr.arpa åŸŸåï¼ˆå³ AS112 åŸŸåï¼‰ã€‚è¿™éƒ¨åˆ†åŸŸåä¸€èˆ¬ä¼šè¢«è§£æåˆ°å±€åŸŸç½‘ IPã€éœ€è¦èµ°å†…ç½‘ DNS è§£æã€éœ€è¦ç›´è¿è®¿é—®ã€‚
RULE-SET,https://ruleset.skk.moe/List/non_ip/lan.conf,DIRECT

### ip ###
#> å¹¿å‘Šæ‹¦æˆª / éšç§ä¿æŠ¤ / ç—…æ¯’æ‹¦æˆª / é’“é±¼å’Œè¯ˆéª—åŸŸåæ‹¦æˆª
RULE-SET,https://ruleset.skk.moe/List/ip/reject.conf,REJECT-DROP

#> æµåª’ä½“ IP
# æŒ‰ç…§æµåª’ä½“é™å®šåŒºåŸŸåŒºåˆ†çš„å¸¸è§æµåª’ä½“æœåŠ¡ IP åˆ—è¡¨ã€‚ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©æ€§å¼•ç”¨ stream_[xx].conf è§„åˆ™ã€å¹¶ä½¿ç”¨ stream.conf ä¸ºå‰©ä¸‹æ‰€æœ‰æµåª’ä½“ IP åšå…œåº•ã€‚
#RULE-SET,https://ruleset.skk.moe/List/ip/stream_hk.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å]
#RULE-SET,https://ruleset.skk.moe/List/ip/stream_jp.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å]
#RULE-SET,https://ruleset.skk.moe/List/ip/stream_us.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å]
#RULE-SET,https://ruleset.skk.moe/List/ip/stream_tw.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å]
#RULE-SET,https://ruleset.skk.moe/List/ip/stream_kr.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å]
#RULE-SET,https://ruleset.skk.moe/List/ip/stream_eu.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å]
RULE-SET,https://ruleset.skk.moe/List/ip/stream.conf,Streaming!CN

#> Telegram IP
RULE-SET,https://ruleset.skk.moe/List/ip/telegram.conf,Telegram
# PROCESS-NAME æœ¬æ¡é€‚ç”¨äºmacOS
PROCESS-NAME,Telegram,REJECT-DROP

#>> è‡ªå®šä¹‰ ip è§„åˆ™
# Google
RULE-SET,https://raw.githubusercontent.com/limxfx/HelloWorld/refs/heads/main/Surge/Ruleset/ip/google.list,Google

#> ç½‘æ˜“äº‘ IP
#RULE-SET,https://ruleset.skk.moe/List/ip/neteasemusic.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å]

#> å›½å†… IP æ®µ
RULE-SET,https://ruleset.skk.moe/List/ip/domestic.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/ip/china_ip.conf,DIRECT
# ä»…å½“ä½¿ç”¨ IPv6 æ—¶æ‰å¯ç”¨
#RULE-SET,https://ruleset.skk.moe/List/ip/china_ip_ipv6.conf,[æ›¿æ¢ä½ çš„ç­–ç•¥å]

#> å†…ç½‘åŸŸå
# åŒ…å« .local å’Œå±€åŸŸç½‘ IP çš„ in-addr.arpa åŸŸåï¼ˆå³ AS112 åŸŸåï¼‰ã€‚è¿™éƒ¨åˆ†åŸŸåä¸€èˆ¬ä¼šè¢«è§£æåˆ°å±€åŸŸç½‘ IPã€éœ€è¦èµ°å†…ç½‘ DNS è§£æã€éœ€è¦ç›´è¿è®¿é—®ã€‚
RULE-SET,https://ruleset.skk.moe/List/ip/lan.conf,DIRECT

#>> Local Area Network & GeoIP China
# ä»¥ä¸‹è§„åˆ™å°†è§¦å‘æœ¬åœ° DNS è§£æã€‚æœ‰ä¸Šé¢å›½å†…éƒ¨åˆ†è§„åˆ™å¯ä»¥ä¸å¯ç”¨ï¼Œå¦‚æœä¸æ”¾å¿ƒå¯ä»¥è‡ªå·±å¼€å¯
OR,((RULE-SET,SYSTEM), (RULE-SET,LAN), (GEOIP,CN)),DIRECT
# RULE-SET,SYSTEM,Proxy
# #>> ä»¥ä¸‹è§„åˆ™å°†è§¦å‘æœ¬åœ° DNS è§£æã€‚æœ‰ä¸Šé¢å›½å†…éƒ¨åˆ†è§„åˆ™å¯ä»¥ä¸å¯ç”¨ï¼Œå¦‚æœä¸æ”¾å¿ƒå¯ä»¥è‡ªå·±å¼€å¯
# RULE-SET,LAN,DIRECT
# GEOIP,CN,DIRECT

#> FINAL
# ä¸èƒ½è¢«åŸŸåå’Œ IP è§„åˆ™åŒ¹é…åˆ°çš„è¯·æ±‚ã€æˆ–è€… Surge æœ¬æœº DNS è§£æå¤±è´¥çš„è¯·æ±‚ï¼Œéƒ½ä½¿ç”¨ FINAL ç­–ç•¥ã€‚
FINAL,Proxy,dns-failed

[MITM]